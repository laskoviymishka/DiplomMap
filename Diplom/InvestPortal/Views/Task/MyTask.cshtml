@using Invest.Common.Model.ProjectModels
@model IEnumerable<Project>
@{
    ViewBag.Title = "Мои задачи";
}
<h2>Мои задачи</h2>
@foreach (var project in Model)
{
    if (project.Tasks != null && project.Tasks.Any())
    {
    <div>
        @Html.ActionLink("Дорожная карта проекта" + @project.Name + "-" + @project.Description, "PlanForProject", "Task", new { id = project._id }, null)
    </div>
        foreach (var task in project.Tasks)
        {
    <div class="list-group"  onclick="addSubTask('@task._id','@task.ProjectId')">
        @{Html.RenderAction("RecursiveTaskPartial", "Task", new { taskId = task._id, projectId = task.ProjectId });}
    </div>
        }
    }
    else
    {
    <div>
        @Html.ActionLink("Дорожная карта проекта" + @project.Name + "-" + @project.Description, "PlanForProject", "Task", new { id = project._id }, null)
        <div>
            Ключевых этапов для этого проекте еще нет
        </div>
    </div>
    }
}