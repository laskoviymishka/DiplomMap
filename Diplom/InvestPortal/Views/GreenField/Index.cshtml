@using InvestPortal.Controllers
@model IEnumerable<Invest.Common.Model.GreenField>
@{
    ViewBag.Title = "Управление новыми проектами";
}

@Html.Telerik().Grid(Model).Name("GreenField").DataKeys(keys => keys.Add(p => p._id)).ToolBar(commands => commands.Insert().ButtonType(GridButtonType.Text).ImageHtmlAttributes(new { style = "margin-left:0" })).DataBinding(dataBinding => dataBinding.Ajax()
        .Select("_SelectAjaxEditing", "GreenField")
        .Insert("InsertGreenField", "GreenField")
        .Update("_SaveAjaxEditing", "GreenField")
        .Delete("_DeleteAjaxEditing", "GreenField")).Columns(columns =>
            {
                columns.Bound(p => p.Description).Title("Описание проекта");
                columns.Bound(p => p.Area).Title("Площадь участка");
                columns.Bound(p => p.CadastrValue).Title("кадастровая стоимость");
                columns.Bound(p => p.EstimateInvestDate).Title("Дата ввода");
                columns.Bound(p => p.Infrastructure).Title("Инфраструктура");
                columns.Bound(p => p.ThirdPartiePretender).Title("Заинтерисованные");
                columns.Bound(p => p.InvestorUser).Title("Логин инвестора");
                columns.ForeignKey(p => p.Region, (IEnumerable<BaseProjectController.NestedRegionViewModel>)ViewBag.Regions, "RegionName", "RegionName").Title("Регион");
                columns.Bound(p => p.AddressName).Title("Адресс");
                columns.ForeignKey(p => p.AssignUser, (IEnumerable<BaseProjectController.NestedUserViewModel>)ViewBag.Users, "Name", "Name").Title("Ответвственный");
                columns.Bound(p => p.WorkflowState.CurrenState).Title("Текущее состояние");
                columns.Bound(p => p.Appendix).Title("Прочее");
                columns.Command(commands =>
                    {
                        commands.Custom("Подробнее").Action("MoreInfo", "GreenField").ButtonType(GridButtonType.Text).Text("Подробнее");
                        commands.Edit().ButtonType(GridButtonType.Text);
                        commands.Delete().ButtonType(GridButtonType.Text);
                    }).Title("управление");
            }).Editable(editing => editing.InsertRowPosition(GridInsertRowPosition.Top).Mode(GridEditMode.InLine)).Pageable().Scrollable(c => c.Height(600)).Sortable().Selectable().Localizable("ru-RU").Groupable().Filterable()
