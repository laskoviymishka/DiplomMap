@model Invest.Common.Model.Common.Region
@{
    ViewBag.Title = "Параметры для региона";
    int idIndex = 0;
}
<link href="../../Content/jquery.dataTables.css" rel="stylesheet" type="text/css" />
<link href="../../Content/demo_table.css" rel="stylesheet" type="text/css" />
<link href="../../Content/demo_page.css" rel="stylesheet" type="text/css" />
<script src="../../Content/jquery.dataTables.min.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $('#main-table').dataTable({
            sPaginationType: 'full_numbers'
        });
    });
</script>
<table id="main-table" class="table table-striped table-condensed">
    <thead>
        <th>
            Обобщенный Показатель
        </th>
        <th>
            Показатель
        </th>
        @for (int i = ViewBag.StartYear; i <= ViewBag.EndYear; i++)
        {
            <th>
                @i год
            </th>
        }
    </thead>
    <tbody>
        @foreach (var inner in Model.Parametrs)
        {
            foreach (var child in inner.ChildParametrs)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => inner.ParametrName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => child.ParametrName)
                </td>
                @for (int i = ViewBag.StartYear; i <= ViewBag.EndYear; i++)
                {
                    <th>
                        <p>@child.Values.FirstOrDefault(c => c.Key == i).Value</p>
                    </th>
                }
            </tr>
            }
        }
    </tbody>
</table>
<script type="text/javascript">
    ShowEdit = function (link, idindex) {
        var index = '#' + idindex;
        $.get(link, function (data) {
            $(index).html(data);
            $(index).toggle('roll');
        });
    }
</script>
